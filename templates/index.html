<!DOCTYPE html>
<html>
<head>
    <title>Smart Weather App</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>🌤️ Smart Weather Predictor</h1>

    <form method="POST">
        <input name="city" placeholder="Enter City" required><br><br>
        <label>Humidity:</label><input name="humidity" type="number" step="0.1" required><br>
        <label>Wind Speed:</label><input name="wind" type="number" step="0.1" required><br>
        <label>Pressure:</label><input name="pressure" type="number" step="0.1" required><br><br>
        <button type="submit">Predict</button>
    </form>

    {% if weather %}
        <h2>Weather in {{ weather.city }}</h2>
        <p>Temp: {{ weather.temperature }}°C | Humidity: {{ weather.humidity }}% | Wind: {{ weather.wind }} km/h | Pressure: {{ weather.pressure }} hPa</p>
        <p>Description: {{ weather.description }}</p>
    {% endif %}

    {% if prediction %}
        <h3>ML Prediction: {{ prediction }} °C</h3>
    {% endif %}

    {% if forecast %}
        <h2>5-Day Forecast</h2>
        <canvas id="forecastChart"></canvas>
        <script>
            const ctx = document.getElementById('forecastChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: {{ forecast | map(attribute='dt') | list }},
                    datasets: [{
                        label: 'Temp (°C)',
                        data: {{ forecast | map(attribute='temp') | list }},
                        borderColor: 'blue',
                        tension: 0.3
                    }]
                }
            });
        </script>
    {% endif %}
</body>
</html>
